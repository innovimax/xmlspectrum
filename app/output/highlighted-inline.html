<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml">
<link rel="stylesheet" type="text/css" href="theme.css"></link>
<title>Test XMLSpectrum</title>
<style type="text/css">
td, th {
border: 1px solid #cacaca; padding: 1px;
white-space: -moz-pre-wrap !important;  /* Mozilla, since 1999 */
white-space: -pre-wrap;      /* Opera 4-6 */
white-space: -o-pre-wrap;    /* Opera 7 */
white-space: pre-wrap;       /* css-3 */
word-wrap: break-word;       /* Internet Explorer 5.5+ */
padding-left:2px;  
}
</style>

<body>
<h1><code>XMLSpectrum: Inline Syntax Highlighting</code></h1>
<p>This web page describes an XSLT 2.0 solution for syntax highlighting embedded code samples contained within an XHTML file. The HTML for this web page was transformed from <a href="html-inline-sample.html">html-inline-sample.html</a> using this method, with the following command-line:</p>
<pre>
  C:\&gt;java -cp "C:\Program Files\Saxon\saxon9he.jar" net.sf.saxon.Transform -t `
  -xsl:xsl/highlight-inline.xsl -s:samples/html-inline-sample.html -o:output/highlighted-inline.html
</pre>
<p>The solution is included in the <code><a href="https://github.com/pgfearo/xmlspectrum">XMLSpectrum</a></code> project hosted on GitHub, the top-level stylesheet is <code>highlight-inline.xsl</code>.</p>
<h2><code>Supported Languages</code></h2>
<p>List of languages along with the required <code>lang</code> attribute of the <code>pre</code> element</p>
<table width="200px" border="1px" style="border-collapse:collapse;border:1px solid #cacaca">
<thead>
<tr>
<th>Language</th>
<th>@lang</th>
</tr>
</thead>
<tbody>
<tr>
<td>XPath 2.0</td><td>xpath</td>
</tr>
<tr>
<td>XSLT 2.0</td><td>xslt</td>
</tr>
<tr>
<td>XSD 1.1</td><td>xsd</td>
</tr>
</tbody>
</table>
<h2>How it works</h2>
<p>The <code>highlight-inline.xsl</code> stylesheet performs an identity transform on the XHTML input, it imports <code>xmlspectrum.xsl</code>, the module containing the highlighting and formatting functions. There are custom templates matching all <code>pre</code> elements with a <code>lang</code> attribute, as this attribute is used to specify the language of the enclosed code sample. Two further attributes: <code>data-indent</code> and <code>data-trim</code> are used to specify whether XML indentation should be added, and initially left-trimmed respectively.</p>
<p>For XSLT or XSD snippets, namespace-correctness is not required, that is, all namespaces don't need to be declared. Instead, the first prefix found on the first element is assumed to be that for either the XSLT or XML Schema namespace. The <code>data-prefix</code> attribute on the <code>pre</code> element can be used to set the prefix explicitly.</p>
<h2>XSLT Code Sample #1</h2>
<p>The following XSLT highlighting sample had no indentation in the source code to reflect the XML nesting level, but there is indentation within the first XPath expression</p>

<p>The raw source code:</p>
<pre style="background-color:#efefef;color:2a2a2a;">
&lt;xsl:template match="test"&gt;

&lt;xsl:variable name="like" as="xs:string"
select="(:describe the total amount:)
if ($total gt 100)
    then 'too big'
else if ($total gt 10)
    then 'big'
else 'small'"/&gt;

&lt;xsl:variable name="tree"&gt;
&lt;books class="size: {concat($like, 'xyz')}"&gt;
&lt;book&gt;
&lt;title&gt;
&lt;main&gt;The main title&lt;/main&gt;
&lt;stub&gt;The stub for the title&lt;/stub&gt;
&lt;/title&gt;
&lt;/book&gt;
&lt;/books&gt;
&lt;/xsl:variable&gt;

&lt;xsl:sequence select="$tree"/&gt;

&lt;/xsl:template&gt;
</pre>

<p>After highlighting and indentation:</p>
<pre class="spectrum" lang="xslt" data-indent="2" data-trim="'no'"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">test</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  
  </span><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname">like</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">xs:string</span><span class="z">"</span><span class="z">
                </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="comment" start="1">(:describe the total amount:)</span><span class="whitespace" start="30">
                        </span><span class="if" start="31">if</span><span class="whitespace" start="33"> </span><span class="parenthesis" start="34" pair-end="48" select="quick">(</span><span class="variable" start="35" select="quick">$total</span><span class="whitespace" start="41"> </span><span class="op" start="42">gt</span><span class="whitespace" start="44"> </span><span class="numeric" start="45">100</span><span class="parenthesis" start="48">)</span><span class="whitespace" start="49">
                            </span><span class="op" start="54">then</span><span class="whitespace" start="58"> </span><span class="op">'</span><span class="literal" start="59">too big</span><span class="op">'</span><span class="whitespace" start="68">
                        </span><span class="op" start="69">else</span><span class="whitespace" start="73"> </span><span class="if" start="74">if</span><span class="whitespace" start="76"> </span><span class="parenthesis" start="77" pair-end="90" select="quick">(</span><span class="variable" start="78" select="quick">$total</span><span class="whitespace" start="84"> </span><span class="op" start="85">gt</span><span class="whitespace" start="87"> </span><span class="numeric" start="88">10</span><span class="parenthesis" start="90">)</span><span class="whitespace" start="91">
                            </span><span class="op" start="96">then</span><span class="whitespace" start="100"> </span><span class="op">'</span><span class="literal" start="101">big</span><span class="op">'</span><span class="whitespace" start="106">
                        </span><span class="op" start="107">else</span><span class="whitespace" start="111"> </span><span class="op">'</span><span class="literal" start="112">small</span><span class="op">'</span><span class="z">"</span><span class="sc">/&gt;</span><span class="txt">
  
  </span><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname">tree</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="es">&lt;</span><span class="en">books</span><span class="z"> </span><span class="atn">class</span><span class="atneq">=</span><span class="z">"</span><span class="av">size: </span><span class="op">{</span><span class="function" start="1" pair-end="20" select="quick">concat</span><span class="parenthesis">(</span><span class="variable" start="8" select="quick">$like</span><span class="op" start="13">,</span><span class="whitespace" start="14"> </span><span class="op">'</span><span class="literal" start="15">xyz</span><span class="op">'</span><span class="parenthesis" start="20">)</span><span class="op">}</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="es">&lt;</span><span class="en">book</span><span class="scx">&gt;</span><span class="txt">
        </span><span class="es">&lt;</span><span class="en">title</span><span class="scx">&gt;</span><span class="txt">
          </span><span class="es">&lt;</span><span class="en">main</span><span class="scx">&gt;</span><span class="txt">The main title</span><span class="ez">&lt;/</span><span class="cl">main</span><span class="ec">&gt;</span><span class="txt">
          </span><span class="es">&lt;</span><span class="en">stub</span><span class="scx">&gt;</span><span class="txt">The stub for the title</span><span class="ez">&lt;/</span><span class="cl">stub</span><span class="ec">&gt;</span><span class="txt">
        </span><span class="ez">&lt;/</span><span class="cl">title</span><span class="ec">&gt;</span><span class="txt">
      </span><span class="ez">&lt;/</span><span class="cl">book</span><span class="ec">&gt;</span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="cl">books</span><span class="ec">&gt;</span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:variable</span><span class="ec">&gt;</span><span class="txt">
  
  </span><span class="es">&lt;</span><span class="enxsl">xsl:sequence</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$tree</span><span class="z">"</span><span class="sc">/&gt;</span><span class="txt">
  
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span class="ec">&gt;</span><span class="txt">
</span></pre>
<h2>XSLT Code Sample #2</h2>
<p> The following XSLT is the auto-indented source code for <code>highlight-inline.xsl</code>.</p>
<pre class="spectrum" lang="xslt" data-indent="2"><span class="es">&lt;</span><span class="enxsl">xsl:stylesheet</span><span class="z"> </span><span class="atn">version</span><span class="atneq">=</span><span class="z">"</span><span class="av">2.0</span><span class="z">"</span><span class="z">
                </span><span class="atn">xmlns:xsl</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://www.w3.org/1999/XSL/Transform</span><span class="z">"</span><span class="z">
                </span><span class="atn">xmlns:xs</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://www.w3.org/2001/XMLSchema</span><span class="z">"</span><span class="z">
                </span><span class="atn">xmlns:loc</span><span class="atneq">=</span><span class="z">"</span><span class="av">com.qutoric.sketchpath.functions</span><span class="z">"</span><span class="z">
                </span><span class="atn">xmlns:css</span><span class="atneq">=</span><span class="z">"</span><span class="av">css-defs.com</span><span class="z">"</span><span class="z">
                </span><span class="atn">exclude-result-prefixes</span><span class="atneq">=</span><span class="z">"</span><span class="av">loc f xs css</span><span class="z">"</span><span class="z">
                </span><span class="atn">xmlns</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://www.w3.org/1999/xhtml</span><span class="z">"</span><span class="z">
                </span><span class="atn">xpath-default-namespace</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://www.w3.org/1999/xhtml</span><span class="z">"</span><span class="z">
                </span><span class="atn">xmlns:f</span><span class="atneq">=</span><span class="z">"</span><span class="av">internal</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  
  </span><span class="es">&lt;</span><span class="enxsl">xsl:import</span><span class="z"> </span><span class="atn">href</span><span class="atneq">=</span><span class="z">"</span><span class="href">xmlspectrum.xsl</span><span class="z">"</span><span class="sc">/&gt;</span><span class="txt">
  
  </span><span class="es">&lt;</span><span class="enxsl">xsl:output</span><span class="z"> </span><span class="atn">indent</span><span class="atneq">=</span><span class="z">"</span><span class="av">no</span><span class="z">"</span><span class="z"> </span><span class="atn">method</span><span class="atneq">=</span><span class="z">"</span><span class="av">html</span><span class="z">"</span><span class="sc">/&gt;</span><span class="txt">
  
  </span><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="pname">light-theme</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="op">'</span><span class="literal" start="1">no</span><span class="op">'</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">xs:string</span><span class="z">"</span><span class="sc">/&gt;</span><span class="txt">
  </span><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="pname">indent</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="op">'</span><span class="literal" start="1">-1</span><span class="op">'</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">xs:string</span><span class="z">"</span><span class="sc">/&gt;</span><span class="txt">
  </span><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="pname">auto-trim</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="op">'</span><span class="literal" start="1">no</span><span class="op">'</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">xs:string</span><span class="z">"</span><span class="sc">/&gt;</span><span class="txt">
  
  </span><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname">indent-size</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="function" start="1" pair-end="19" select="quick">xs:integer</span><span class="parenthesis">(</span><span class="variable" start="12" select="quick">$indent</span><span class="parenthesis" start="19">)</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">xs:integer</span><span class="z">"</span><span class="sc">/&gt;</span><span class="txt">
  </span><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname">do-trim</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$auto-trim</span><span class="whitespace" start="11"> </span><span class="op" start="12">eq</span><span class="whitespace" start="14"> </span><span class="op">'</span><span class="literal" start="15">yes</span><span class="op">'</span><span class="z">"</span><span class="sc">/&gt;</span><span class="txt">
  
  </span><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="step" start="1">/</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="sc">/&gt;</span><span class="txt">
    </span><span class="es">&lt;</span><span class="enxsl">xsl:call-template</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="tcall">create-css</span><span class="z">"</span><span class="sc">/&gt;</span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span class="ec">&gt;</span><span class="txt">
  
  </span><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">html</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="es">&lt;</span><span class="enxsl">xsl:text</span><span class="z"> </span><span class="atn">disable-output-escaping</span><span class="atneq">=</span><span class="z">'</span><span class="av">yes</span><span class="z">'</span><span class="scx">&gt;</span><span class="txt"></span><span class="z">&lt;!</span><span class="dt">DOCTYPE html</span><span class="z">&gt;</span><span class="txt"></span><span class="ez">&lt;/</span><span class="clxsl">xsl:text</span><span class="ec">&gt;</span><span class="txt">
    </span><span class="es">&lt;</span><span class="enxsl">xsl:copy</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="node" start="1" pair-end="6" select="quick">node</span><span class="parenthesis">(</span><span class="parenthesis" start="6">)</span><span class="op" start="7">|</span><span class="axis" start="8">@</span><span class="qname" start="9" select="quick">*</span><span class="z">"</span><span class="sc">/&gt;</span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:copy</span><span class="ec">&gt;</span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span class="ec">&gt;</span><span class="txt">
  
  </span><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">head</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">@</span><span class="qname" start="2" select="quick">*</span><span class="z">"</span><span class="sc">/&gt;</span><span class="txt">
    </span><span class="es">&lt;</span><span class="en">link</span><span class="z"> </span><span class="atn">rel</span><span class="atneq">=</span><span class="z">"</span><span class="av">stylesheet</span><span class="z">"</span><span class="z"> </span><span class="atn">type</span><span class="atneq">=</span><span class="z">"</span><span class="av">text/css</span><span class="z">"</span><span class="z"> </span><span class="atn">href</span><span class="atneq">=</span><span class="z">"</span><span class="av">theme.css</span><span class="z">"</span><span class="sc">/&gt;</span><span class="txt">
    </span><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="sc">/&gt;</span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span class="ec">&gt;</span><span class="txt">
  
  
  </span><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">@</span><span class="qname" start="2" select="quick">*</span><span class="whitespace" start="3"> </span><span class="op" start="4">|</span><span class="whitespace" start="5"> </span><span class="node" start="6" pair-end="11" select="quick">node</span><span class="parenthesis">(</span><span class="parenthesis" start="11">)</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="es">&lt;</span><span class="enxsl">xsl:copy</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">@</span><span class="qname" start="2" select="quick">*</span><span class="whitespace" start="3"> </span><span class="op" start="4">|</span><span class="whitespace" start="5"> </span><span class="node" start="6" pair-end="11" select="quick">node</span><span class="parenthesis">(</span><span class="parenthesis" start="11">)</span><span class="z">"</span><span class="sc">/&gt;</span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:copy</span><span class="ec">&gt;</span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span class="ec">&gt;</span><span class="txt">
  
  </span><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">pre</span><span class="filter" start="4" pair-end="39" select="quick">[</span><span class="function" start="5" pair-end="17" select="quick">exists</span><span class="parenthesis">(</span><span class="axis" start="12">@</span><span class="qname" start="13" select="quick">lang</span><span class="parenthesis" start="17">)</span><span class="whitespace" start="18"> </span><span class="op" start="19">and</span><span class="whitespace" start="22"> </span><span class="axis" start="23">@</span><span class="qname" start="24" select="quick">lang</span><span class="whitespace" start="28"> </span><span class="op" start="29">ne</span><span class="whitespace" start="31"> </span><span class="op">'</span><span class="literal" start="32">xpath</span><span class="op">'</span><span class="filter" start="39">]</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname">is-xsl</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">@</span><span class="qname" start="2" select="quick">lang</span><span class="whitespace" start="6"> </span><span class="op" start="7">eq</span><span class="whitespace" start="9"> </span><span class="op">'</span><span class="literal" start="10">xslt</span><span class="op">'</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">xs:boolean</span><span class="z">"</span><span class="sc">/&gt;</span><span class="txt">
    </span><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname">prefix</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="parenthesis" start="1" pair-end="18" select="quick">(</span><span class="axis" start="2">@</span><span class="qname" start="3" select="quick">data-prefix</span><span class="op" start="14">,</span><span class="whitespace" start="15"> </span><span class="op">'</span><span class="literal" start="16"></span><span class="op">'</span><span class="parenthesis" start="18">)</span><span class="filter" start="19" pair-end="21" select="quick">[</span><span class="numeric" start="20">1</span><span class="filter" start="21">]</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">xs:string</span><span class="z">"</span><span class="sc">/&gt;</span><span class="txt">
    </span><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname">context-indent</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="if" start="1">if</span><span class="whitespace" start="3"> </span><span class="parenthesis" start="4" pair-end="25" select="quick">(</span><span class="function" start="5" pair-end="24" select="quick">exists</span><span class="parenthesis">(</span><span class="axis" start="12">@</span><span class="qname" start="13" select="quick">data-indent</span><span class="parenthesis" start="24">)</span><span class="parenthesis" start="25">)</span><span class="whitespace" start="26">
                                                </span><span class="op" start="27">then</span><span class="whitespace" start="31"> </span><span class="function" start="32" pair-end="55" select="quick">xs:integer</span><span class="parenthesis">(</span><span class="axis" start="43">@</span><span class="qname" start="44" select="quick">data-indent</span><span class="parenthesis" start="55">)</span><span class="whitespace" start="56">
                                                </span><span class="op" start="57">else</span><span class="whitespace" start="61"> </span><span class="variable" start="62" select="quick">$indent-size</span><span class="z">"</span><span class="sc">/&gt;</span><span class="txt">
    </span><span class="es">&lt;</span><span class="enxsl">xsl:copy</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="es">&lt;</span><span class="enxsl">xsl:attribute</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">class</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">@</span><span class="qname" start="2" select="quick">lang</span><span class="z">"</span><span class="sc">/&gt;</span><span class="txt">
      </span><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">@</span><span class="qname" start="2" select="quick">*</span><span class="whitespace" start="3"> </span><span class="op" start="4">except</span><span class="whitespace" start="10"> </span><span class="axis" start="11">@</span><span class="qname" start="12" select="quick">class</span><span class="z">"</span><span class="sc">/&gt;</span><span class="txt">
      </span><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname">real-trim</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">xs:boolean</span><span class="z">"</span><span class="z">
                    </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="if" start="1">if</span><span class="whitespace" start="3"> </span><span class="parenthesis" start="4" pair-end="23" select="quick">(</span><span class="function" start="5" pair-end="22" select="quick">exists</span><span class="parenthesis">(</span><span class="axis" start="12">@</span><span class="qname" start="13" select="quick">data-trim</span><span class="parenthesis" start="22">)</span><span class="parenthesis" start="23">)</span><span class="whitespace" start="24">
                            </span><span class="op" start="25">then</span><span class="whitespace" start="29"> </span><span class="axis" start="30">@</span><span class="qname" start="31" select="quick">data-trim</span><span class="op" start="40">=</span><span class="op">'</span><span class="literal" start="41">yes</span><span class="op">'</span><span class="whitespace" start="46">
                            </span><span class="op" start="47">else</span><span class="whitespace" start="51"> </span><span class="variable" start="52" select="quick">$do-trim</span><span class="z">"</span><span class="sc">/&gt;</span><span class="txt">
      </span><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
        </span><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$real-trim</span><span class="whitespace" start="11"> </span><span class="op" start="12">or</span><span class="whitespace" start="14"> </span><span class="variable" start="15" select="quick">$context-indent</span><span class="whitespace" start="30"> </span><span class="op" start="31">gt</span><span class="whitespace" start="33"> </span><span class="numeric" start="34">0</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
          </span><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname">renderedXML</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="function" start="1" pair-end="29" select="quick">f:render</span><span class="parenthesis">(</span><span class="context" start="10">.</span><span class="op" start="11">,</span><span class="whitespace" start="12"> </span><span class="variable" start="13" select="quick">$is-xsl</span><span class="op" start="20">,</span><span class="whitespace" start="21"> </span><span class="variable" start="22" select="quick">$prefix</span><span class="parenthesis" start="29">)</span><span class="z">"</span><span class="z">
                        </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">element()*</span><span class="z">"</span><span class="sc">/&gt;</span><span class="txt">
          </span><span class="es">&lt;</span><span class="enxsl">xsl:sequence</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="function" start="1" pair-end="51" select="quick">f:indent</span><span class="parenthesis">(</span><span class="variable" start="10" select="quick">$renderedXML</span><span class="op" start="22">,</span><span class="whitespace" start="23"> </span><span class="variable" start="24" select="quick">$context-indent</span><span class="op" start="39">,</span><span class="whitespace" start="40"> </span><span class="variable" start="41" select="quick">$real-trim</span><span class="parenthesis" start="51">)</span><span class="z">"</span><span class="sc">/&gt;</span><span class="txt">
        </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span class="ec">&gt;</span><span class="txt">
        </span><span class="es">&lt;</span><span class="enxsl">xsl:otherwise</span><span class="scx">&gt;</span><span class="txt">
          </span><span class="es">&lt;</span><span class="enxsl">xsl:sequence</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="function" start="1" pair-end="29" select="quick">f:render</span><span class="parenthesis">(</span><span class="context" start="10">.</span><span class="op" start="11">,</span><span class="whitespace" start="12"> </span><span class="variable" start="13" select="quick">$is-xsl</span><span class="op" start="20">,</span><span class="whitespace" start="21"> </span><span class="variable" start="22" select="quick">$prefix</span><span class="parenthesis" start="29">)</span><span class="z">"</span><span class="sc">/&gt;</span><span class="txt">
        </span><span class="ez">&lt;/</span><span class="clxsl">xsl:otherwise</span><span class="ec">&gt;</span><span class="txt">
      </span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span class="ec">&gt;</span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:copy</span><span class="ec">&gt;</span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span class="ec">&gt;</span><span class="txt">
  
  </span><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">pre</span><span class="filter" start="4" pair-end="21" select="quick">[</span><span class="axis" start="5">@</span><span class="qname" start="6" select="quick">lang</span><span class="whitespace" start="10"> </span><span class="op" start="11">eq</span><span class="whitespace" start="13"> </span><span class="op">'</span><span class="literal" start="14">xpath</span><span class="op">'</span><span class="filter" start="21">]</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="es">&lt;</span><span class="enxsl">xsl:copy</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="es">&lt;</span><span class="enxsl">xsl:attribute</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">class</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">@</span><span class="qname" start="2" select="quick">lang</span><span class="z">"</span><span class="sc">/&gt;</span><span class="txt">
      </span><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">@</span><span class="qname" start="2" select="quick">*</span><span class="whitespace" start="3"> </span><span class="op" start="4">except</span><span class="whitespace" start="10"> </span><span class="axis" start="11">@</span><span class="qname" start="12" select="quick">class</span><span class="z">"</span><span class="sc">/&gt;</span><span class="txt">
      </span><span class="es">&lt;</span><span class="enxsl">xsl:sequence</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="function" start="1" pair-end="16" select="quick">loc:showXPath</span><span class="parenthesis">(</span><span class="context" start="15">.</span><span class="parenthesis" start="16">)</span><span class="z">"</span><span class="sc">/&gt;</span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:copy</span><span class="ec">&gt;</span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span class="ec">&gt;</span><span class="txt">
  
  </span><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="tname">create-css</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    
    </span><span class="es">&lt;</span><span class="enxsl">xsl:result-document</span><span class="z"> </span><span class="atn">href</span><span class="atneq">=</span><span class="z">"</span><span class="av">theme.css</span><span class="z">"</span><span class="z"> </span><span class="atn">method</span><span class="atneq">=</span><span class="z">"</span><span class="av">text</span><span class="z">"</span><span class="z"> </span><span class="atn">indent</span><span class="atneq">=</span><span class="z">"</span><span class="av">no</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname">classes</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="op">'</span><span class="literal" start="1">pre.xslt, pre.xsd, pre.xpath, </span><span class="op">'</span><span class="z">"</span><span class="sc">/&gt;</span><span class="txt">
      </span><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname">is-light-theme</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">xs:boolean</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$light-theme</span><span class="whitespace" start="13"> </span><span class="op" start="14">eq</span><span class="whitespace" start="16"> </span><span class="op">'</span><span class="literal" start="17">yes</span><span class="op">'</span><span class="z">"</span><span class="sc">/&gt;</span><span class="txt">
      </span><span class="es">&lt;</span><span class="enxsl">xsl:sequence</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$classes</span><span class="op" start="9">,</span><span class="whitespace" start="10"> </span><span class="function" start="11" pair-end="36" select="quick">f:get-css</span><span class="parenthesis">(</span><span class="variable" start="21" select="quick">$is-light-theme</span><span class="parenthesis" start="36">)</span><span class="z">"</span><span class="sc">/&gt;</span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:result-document</span><span class="ec">&gt;</span><span class="txt">
    
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span class="ec">&gt;</span><span class="txt">
  
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:stylesheet</span><span class="ec">&gt;</span><span class="txt">
</span></pre>
<h2>XSD Code Sample</h2>
<p> The following XSD is colorised  as XSD because the <code>pre</code> element
has a <code>lang</code> attribute with value 'xsd'.</p>
<pre class="spectrum" lang="xsd"><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="es">&lt;</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="enxsl">xs:element</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="z"> </span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="atn">name</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="atneq">=</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="z">"</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="fname">price</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="z">"</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="scx">&gt;</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="txt">
 </span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="es">&lt;</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="en">xs:complexType</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="scx">&gt;</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="txt">
   </span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="es">&lt;</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="en">xs:sequence</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="scx">&gt;</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="txt">
     </span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="es">&lt;</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="enxsl">xs:element</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="z"> </span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="atn">name</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="atneq">=</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="z">"</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="fname">value</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="z">"</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="z"> </span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="atn">maxOccurs</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="atneq">=</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="z">"</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="av">unbounded</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="z">"</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="scx">&gt;</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="txt">
        </span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="es">&lt;</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="en">xs:complexType</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="scx">&gt;</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="txt">
          </span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="es">&lt;</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="en">xs:simpleContent</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="scx">&gt;</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="txt">
            </span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="es">&lt;</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="en">xs:extension</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="z"> </span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="atn">base</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="atneq">=</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="z">"</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="av">xs:double</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="z">"</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="scx">&gt;</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="txt">
              </span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="es">&lt;</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="enxsl">xs:attribute</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="z"> </span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="atn">name</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="atneq">=</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="z">"</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="fname">effective</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="z">"</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="z"> </span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="atn">type</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="atneq">=</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="z">"</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="av">xs:date</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="z">"</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="z"> </span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="atn">use</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="atneq">=</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="z">"</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="av">required</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="z">"</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="sc">/&gt;</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="txt">
              </span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="es">&lt;</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="enxsl">xs:attribute</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="z"> </span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="atn">name</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="atneq">=</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="z">"</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="fname">freeware</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="z">"</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="z"> </span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="atn">type</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="atneq">=</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="z">"</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="av">xs:boolean</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="z">"</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="sc">/&gt;</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="txt">
              </span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="es">&lt;</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="enxsl">xs:attribute</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="z"> </span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="atn">name</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="atneq">=</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="z">"</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="fname">format</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="z">"</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="z"> </span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="atn">use</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="atneq">=</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="z">"</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="av">required</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="z">"</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="scx">&gt;</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="txt">
                </span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="es">&lt;</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="en">xs:simpleType</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="scx">&gt;</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="txt">
                  </span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="es">&lt;</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="en">xs:restriction</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="z"> </span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="atn">base</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="atneq">=</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="z">"</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="av">xs:string</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="z">"</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="scx">&gt;</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="txt">
                    </span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="es">&lt;</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="en">xs:enumeration</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="z"> </span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="atn">value</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="atneq">=</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="z">"</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="av">hard cover</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="z">"</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="sc">/&gt;</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="txt">
                    </span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="es">&lt;</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="en">xs:enumeration</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="z"> </span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="atn">value</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="atneq">=</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="z">"</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="av">pdf</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="z">"</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="sc">/&gt;</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="txt">
                  </span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="ez">&lt;/</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="cl">xs:restriction</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="ec">&gt;</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="txt">
                </span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="ez">&lt;/</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="cl">xs:simpleType</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="ec">&gt;</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="txt">
              </span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="ez">&lt;/</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="clxsl">xs:attribute</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="ec">&gt;</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="txt">
              </span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="es">&lt;</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="en">xs:assert</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="z"> </span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="atn">test</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="atneq">=</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="z">"</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="axis" start="1">@</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="qname" start="2" select="quick">effective</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="whitespace" start="11"> </span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="op" start="12">lt</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="whitespace" start="14"> </span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="function" start="15" pair-end="28" select="quick">current-date</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="parenthesis">(</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="parenthesis" start="28">)</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="z">"</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="sc">/&gt;</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="txt">
              </span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="es">&lt;</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="en">xs:assert</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="z"> </span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="atn">test</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="atneq">=</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="z">"</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="if" start="1">if</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="whitespace" start="3"> </span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="parenthesis" start="4" pair-end="24" select="quick">(</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="axis" start="5">@</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="qname" start="6" select="quick">freeware</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="whitespace" start="14"> </span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="op" start="15">eq</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="whitespace" start="17"> </span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="function" start="18" pair-end="23" select="quick">true</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="parenthesis">(</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="parenthesis" start="23">)</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="parenthesis" start="24">)</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="whitespace" start="25"> </span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="op" start="26">then</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="whitespace" start="30"> </span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="parenthesis" start="31" pair-end="59" select="quick">(</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="axis" start="32">@</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="qname" start="33" select="quick">format</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="whitespace" start="39"> </span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="op" start="40">eq</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="whitespace" start="42"> </span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="op">'</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="literal" start="43">pdf</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="op">'</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="whitespace" start="48"> </span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="op" start="49">and</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="whitespace" start="52"> </span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="context" start="53">.</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="whitespace" start="54"> </span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="op" start="55">eq</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="whitespace" start="57"> </span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="numeric" start="58">0</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="parenthesis" start="59">)</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="whitespace" start="60">
                               </span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="op" start="92">else</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="whitespace" start="96"> </span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="function" start="97" pair-end="102" select="quick">true</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="parenthesis">(</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="parenthesis" start="102">)</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="z">"</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="sc">/&gt;</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="txt">                    
            </span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="ez">&lt;/</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="cl">xs:extension</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="ec">&gt;</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="txt">
          </span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="ez">&lt;/</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="cl">xs:simpleContent</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="ec">&gt;</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="txt">
        </span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="ez">&lt;/</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="cl">xs:complexType</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="ec">&gt;</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="txt">
     </span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="ez">&lt;/</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="clxsl">xs:element</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="ec">&gt;</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="txt">
   </span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="ez">&lt;/</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="cl">xs:sequence</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="ec">&gt;</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="txt">
   </span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="es">&lt;</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="en">xs:assert</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="z"> </span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="atn">test</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="atneq">=</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="z">"</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="higher" start="1">every</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="whitespace" start="6"> </span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" id="rng-$vl" class="variable" start="7" select="quick">$vl</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="whitespace" start="10"> </span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="op" start="11">in</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="whitespace" start="13"> </span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="qname" start="14" select="quick">value</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="filter" start="19" pair-end="40" select="quick">[</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="function" start="20" pair-end="29" select="quick">position</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="parenthesis">(</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="parenthesis" start="29">)</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="whitespace" start="30"> </span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="op" start="31">lt</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="whitespace" start="33"> </span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="function" start="34" pair-end="39" select="quick">last</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="parenthesis">(</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="parenthesis" start="39">)</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="filter" start="40">]</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="whitespace" start="41"> </span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="op" start="42">satisfies</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="whitespace" start="51">
                    </span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="parenthesis" start="72" pair-end="111" select="quick">(</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="variable" start="73" select="quick">$vl</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="whitespace" start="76"> </span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="op" start="77">gt</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="whitespace" start="79"> </span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="variable" start="80" select="quick">$vl</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="step" start="83">/</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="axis" start="84">following-sibling::</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="qname" start="103" select="quick">value</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="filter" start="108" pair-end="110" select="quick">[</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="numeric" start="109">1</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="filter" start="110">]</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="parenthesis" start="111">)</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="whitespace" start="112"> </span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="op" start="113">and</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="whitespace" start="116"> 
                    </span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="parenthesis" start="138" pair-end="199" select="quick">(</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="variable" start="139" select="quick">$vl</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="step" start="142">/</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="axis" start="143">@</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="qname" start="144" select="quick">effective</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="whitespace" start="153"> </span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="op" start="154">lt</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="whitespace" start="156"> </span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="variable" start="157" select="quick">$vl</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="step" start="160">/</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="axis" start="161">following-sibling::</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="qname" start="180" select="quick">value</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="filter" start="185" pair-end="187" select="quick">[</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="numeric" start="186">1</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="filter" start="187">]</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="step" start="188">/</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="axis" start="189">@</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="qname" start="190" select="quick">effective</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="parenthesis" start="199">)</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="z">"</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="sc">/&gt;</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="txt">
 </span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="ez">&lt;/</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="cl">xs:complexType</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="ec">&gt;</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="txt">
</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="ez">&lt;/</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="clxsl">xs:element</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="ec">&gt;</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="txt">
</span></pre>
<p>The sample above shows XPath syntax highlighting for the contents of the <code>test</code> attribute belonging to the <code>xs:assert</code> element. Also, <code>xs:attribute</code> and <code>xs:element</code> declarations have different highlighting so they are emphasized.</p>

<h2>XPath Code Sample</h2>
<p> The following code in a <code>pre</code> element is colorised as XPath because the <code>pre</code> element
has a <code>lang</code> attribute of 'xpath'.</p>
<pre class="spectrum" lang="xpath"><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="whitespace" start="1">
    </span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="if" start="6">if</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="whitespace" start="8"> </span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="parenthesis" start="9" pair-end="148" select="quick">(</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="axis" start="10">@</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="qname" start="11" select="quick">type</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="whitespace" start="15"> </span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="op" start="16">eq</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="whitespace" start="18"> </span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="op">'</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="literal" start="19">literal</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="op">'</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="whitespace" start="28">
        </span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="op" start="37">and</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="whitespace" start="40"> </span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="function" start="41" pair-end="142" select="quick">matches</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="parenthesis">(</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="whitespace" start="49">
                </span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="axis" start="66">@</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="qname" start="67" select="quick">value</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="whitespace" start="72"> </span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="op" start="73">,</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="whitespace" start="74">
                </span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="op">'</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="literal" start="91">select[\n\p{Zs}]*=[\n\p{Zs}]*[&amp;quot;&amp;apos;&amp;apos;]</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="op">'</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="parenthesis" start="142">)</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="whitespace" start="143">
    </span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="parenthesis" start="148">)</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="whitespace" start="149">
    </span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="op" start="154">then</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="whitespace" start="158">
        </span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="op">'</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="literal" start="167">select</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="op">'</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="whitespace" start="175">
    </span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="op" start="180">else</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="whitespace" start="184">
        </span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="axis" start="193">@</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="qname" start="194" select="quick">type</span><span xmlns:dt="http://qutoric.com.xmlspectrum.document-types" class="whitespace" start="198">
</span></pre>
<h2>Summary</h2>
<p>
The <code>highlight-inline.xsl</code> stylesheet is a simple working demonstration of how the XSLT functions contained within <code>xmlspectrum.xsl</code> can be called to add syntax highlighting to <code>pre</code> elements within an XHTML source file. Only small changes would be required for this to work with code samples included in XML vocabularies other than XHTML, such as Docbook, XMLSpec or DITA.
</p>
</body>
</html>