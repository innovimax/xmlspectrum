<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>devtest.xql</title><link rel="stylesheet" type="text/css" href="theme.css"></head><body><div><pre class="spectrum"><span xq="yes" start="1" prev-is-closed="false" class="qname">xquery</span><span xq="yes" start="7" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="8" prev-is-closed="true" class="qname">version</span><span xq="yes" start="15" prev-is-closed="true" class="whitespace"> </span><span class="op">"</span><span class="literal" pos="16" xq="yes">1.0</span><span class="op">"</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="op">;</span><span xq="yes" start="2" prev-is-closed="false" class="whitespace">&#xD;
</span><span class="comment" pos="24" xq="yes">(:&#xD;
: Module Name: Sample&#xD;
: Module Version: 1.0&#xD;
: Date: October 6, 2011&#xD;
:)</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="false" class="whitespace">&#xD;
&#xD;
</span><span class="comment" pos="105" xq="yes">(:~ so we have XPath 2.0 as default (:function namespace:) :)</span><span xq="yes" start="1" prev-is-closed="false" class="whitespace">&#xD;
</span><span xq="yes" start="3" prev-is-closed="false" class="qname">declare</span><span xq="yes" start="10" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="11" prev-is-closed="true" class="qname">default</span><span xq="yes" start="18" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="19" prev-is-closed="true" class="qname">function</span><span xq="yes" start="27" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="28" prev-is-closed="true" class="qname">namespace</span><span xq="yes" start="37" prev-is-closed="true" class="whitespace"> </span><span class="op">"</span><span class="literal" pos="203" xq="yes">http://www.w3.org/2005/xpath-functions</span><span class="op">"</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="op">;</span><span xq="yes" start="2" prev-is-closed="false" class="whitespace"> &#xD;
</span><span class="comment" pos="247" xq="yes">(:~ this module outputs html  :)</span><span xq="yes" start="1" prev-is-closed="false" class="whitespace">&#xD;
</span><span xq="yes" start="3" prev-is-closed="false" class="qname">declare</span><span xq="yes" start="10" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="11" prev-is-closed="true" class="qname">default</span><span xq="yes" start="18" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="19" prev-is-closed="true" class="qname">element</span><span xq="yes" start="26" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="27" prev-is-closed="true" class="qname">namespace</span><span xq="yes" start="36" prev-is-closed="true" class="whitespace"> </span><span class="op">"</span><span class="literal" pos="315" xq="yes">http://www.w3.org/1999/xhtml</span><span class="op">"</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="op">;</span><span xq="yes" start="2" prev-is-closed="false" class="whitespace">&#xD;
&#xD;
</span><span class="comment" pos="350" xq="yes">(:~ This variable contains the first variable to process. :)</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="false" class="whitespace">&#xD;
</span><span xq="yes" start="3" prev-is-closed="false" class="qname">declare</span><span xq="yes" start="10" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="11" prev-is-closed="true" class="qname">variable</span><span xq="yes" start="19" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="20" prev-is-closed="true" class="variable">$operand-one</span><span xq="yes" start="32" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="33" prev-is-closed="true" class="op">as</span><span xq="yes" start="35" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="36" prev-is-closed="false" class="type-name">xs:integer</span><span xq="yes" start="46" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="47" prev-is-closed="true" class="qname">external</span><span xq="yes" start="55" prev-is-closed="true" class="op">;</span><span xq="yes" start="56" prev-is-closed="false" class="whitespace">&#xD;
&#xD;
</span><span class="comment" pos="469" xq="yes">(:~ This variable contains the second integer to process. :)</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="false" class="whitespace">&#xD;
</span><span xq="yes" start="3" prev-is-closed="false" class="qname">declare</span><span xq="yes" start="10" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="11" prev-is-closed="true" class="qname">variable</span><span xq="yes" start="19" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="20" prev-is-closed="true" class="variable">$operand-two</span><span xq="yes" start="32" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="33" prev-is-closed="true" class="op">as</span><span xq="yes" start="35" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="36" prev-is-closed="false" class="type-name">xs:integer</span><span xq="yes" start="46" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="47" prev-is-closed="true" class="qname">external</span><span xq="yes" start="55" prev-is-closed="true" class="op">;</span><span xq="yes" start="56" prev-is-closed="false" class="whitespace">&#xD;
&#xD;
</span><span class="comment" pos="588" xq="yes">(:~&#xD;
: Generates title for html page&#xD;
: &lt;ul class="list"&gt;&#xD;
:    &lt;li&gt;&#xD;
        A list item and keywords 'and', 'some' + operators&#xD;
:    &lt;/li&gt;&#xD;
: @returns string value for title&#xD;
:)</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="false" class="whitespace">&#xD;
</span><span xq="yes" start="3" prev-is-closed="false" class="qname">declare</span><span xq="yes" start="10" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="11" prev-is-closed="true" class="qname">function</span><span xq="yes" start="19" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="20" prev-is-closed="true" class="function">local:title</span><span class="parenthesis">(</span><span xq="yes" start="32" prev-is-closed="false" class="parenthesis">)</span><span xq="yes" start="33" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="34" prev-is-closed="true" class="op">as</span><span xq="yes" start="36" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="37" prev-is-closed="false" class="type-name">xs:string</span><span xq="yes" start="46" prev-is-closed="true" class="op">{</span><span xq="yes" start="47" prev-is-closed="false" class="whitespace">&#xD;
</span><span class="op">'</span><span class="literal" pos="815" xq="yes">A Sample XQuery File</span><span class="op">'</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="whitespace">&#xD;
</span><span xq="yes" start="3" prev-is-closed="true" class="op">}</span><span xq="yes" start="4" prev-is-closed="true" class="op">;</span><span xq="yes" start="5" prev-is-closed="false" class="whitespace">&#xD;
&#xD;
&#xD;
</span><span xq="yes" start="11" prev-is-closed="false" class="qname">declare</span><span xq="yes" start="18" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="19" prev-is-closed="true" class="qname">function</span><span xq="yes" start="27" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="28" prev-is-closed="true" class="function">local:mytest</span><span class="parenthesis">(</span><span xq="yes" start="41" prev-is-closed="false" class="parenthesis">)</span><span xq="yes" start="42" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="43" prev-is-closed="true" class="op">as</span><span xq="yes" start="45" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="46" prev-is-closed="false" class="type-name">xs:boolean</span><span xq="yes" start="56" prev-is-closed="true" class="whitespace">&#xD;
</span><span xq="yes" start="58" prev-is-closed="true" class="op">{</span><span xq="yes" start="59" prev-is-closed="false" class="whitespace">&#xD;
</span><span xq="yes" start="61" prev-is-closed="false" class="if">if</span><span xq="yes" start="63" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="64" prev-is-closed="false" class="parenthesis">(</span><span xq="yes" start="65" prev-is-closed="false" class="function">empty</span><span class="parenthesis">(</span><span xq="yes" start="71" prev-is-closed="false" class="variable">$operand-one</span><span xq="yes" start="83" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="84" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="85" prev-is-closed="true" class="whitespace">&#xD;
    </span><span xq="yes" start="91" prev-is-closed="true" class="op">then</span><span xq="yes" start="95" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="96" prev-is-closed="false" class="function">false</span><span class="parenthesis">(</span><span xq="yes" start="102" prev-is-closed="false" class="parenthesis">)</span><span xq="yes" start="103" prev-is-closed="true" class="whitespace">&#xD;
 </span><span xq="yes" start="106" prev-is-closed="true" class="op">else</span><span xq="yes" start="110" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="111" prev-is-closed="false" class="if">if</span><span xq="yes" start="113" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="114" prev-is-closed="false" class="parenthesis">(</span><span xq="yes" start="115" prev-is-closed="false" class="variable">$operand-two</span><span xq="yes" start="127" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="128" prev-is-closed="true" class="op">eq</span><span xq="yes" start="130" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="131" prev-is-closed="false" class="numeric">2</span><span xq="yes" start="132" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="133" prev-is-closed="true" class="whitespace">&#xD;
    </span><span xq="yes" start="139" prev-is-closed="true" class="op">then</span><span xq="yes" start="143" prev-is-closed="false" class="whitespace">&#xD;
    </span><span xq="yes" start="149" prev-is-closed="false" class="variable">$operand-two</span><span xq="yes" start="161" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="162" prev-is-closed="true" class="op">eq</span><span xq="yes" start="164" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="165" prev-is-closed="false" class="numeric">3</span><span xq="yes" start="166" prev-is-closed="true" class="whitespace">&#xD;
 </span><span xq="yes" start="169" prev-is-closed="true" class="op">else</span><span xq="yes" start="173" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="174" prev-is-closed="false" class="function">false</span><span class="parenthesis">(</span><span xq="yes" start="180" prev-is-closed="false" class="parenthesis">)</span><span xq="yes" start="181" prev-is-closed="true" class="whitespace">&#xD;
</span><span xq="yes" start="183" prev-is-closed="true" class="op">}</span><span xq="yes" start="184" prev-is-closed="true" class="op">;</span><span xq="yes" start="185" prev-is-closed="false" class="whitespace">&#xD;
&#xD;
</span><span xq="yes" start="189" prev-is-closed="false" class="if">if</span><span xq="yes" start="191" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="192" prev-is-closed="false" class="parenthesis">(</span><span xq="yes" start="193" prev-is-closed="false" class="function">true</span><span class="parenthesis">(</span><span xq="yes" start="198" prev-is-closed="false" class="parenthesis">)</span><span xq="yes" start="199" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="200" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="201" prev-is-closed="true" class="op">then</span><span xq="yes" start="205" prev-is-closed="false" class="whitespace">&#xD;
</span><span pos="1043" class="es">&lt;</span><span name="xml-open-tag" pos="1044" class="en">html</span><span name="xml-name-end" pos="1048" class="atn"> attr</span><span name="x-equals" pos="1053" class="atneq">=</span><span name="xml-att-quote" pos="1054" class="z">"</span><span name="xml-literal-start" pos="1055" class="av">simple test</span><span name="xml-att-quote" pos="1066" class="z">"</span><span name="xml-literal-end" pos="1067" class="atn"> test</span><span name="x-equals" pos="1072" class="atneq">=</span><span name="xml-att-quote" pos="1073" class="z">"</span><span name="xml-literal-start" pos="1074" class="av">my </span><span name="nested-query" pos="1077" class="op">{</span><span xq="yes" start="1" prev-is-closed="true" class="qname">awkward</span><span xq="yes" start="8" prev-is-closed="true" class="step">/</span><span xq="yes" start="9" prev-is-closed="false" class="qname">difficult</span><span name="unnested-xquery" pos="1095" class="op">}</span><span name="resume-x-literal" pos="1096" class="av"> answer</span><span name="xml-att-quote" pos="1103" class="z">"</span><span name="xml-literal-end" pos="1104" class="atn"> class</span><span name="x-equals" pos="1110" class="atneq">=</span><span name="xml-att-quote" pos="1111" class="z">"</span><span name="nested-query" pos="1112" class="op">{</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="step">/</span><span xq="yes" start="2" prev-is-closed="false" class="qname">abc</span><span xq="yes" start="5" prev-is-closed="true" class="filter">[</span><span xq="yes" start="6" prev-is-closed="false" class="axis">@</span><span xq="yes" start="7" prev-is-closed="false" class="qname">name</span><span xq="yes" start="11" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="12" prev-is-closed="true" class="op">eq</span><span xq="yes" start="14" prev-is-closed="false" class="whitespace"> </span><span class="op">'</span><span class="literal" pos="1127" xq="yes">testing</span><span class="op">'</span><span xq="yes" start="1" prev-is-closed="true" class="filter">]</span><span name="unnested-xquery" pos="1137" class="op">}</span><span name="xml-att-quote" pos="1138" class="z">"</span><span name="x-tag-end" pos="1139" class="z">&gt;</span><span pos="1140" class="txt"> &#xD;
</span><span pos="1143" class="es">&lt;</span><span name="xml-open-tag" pos="1144" class="en">head</span><span name="xml-name-end" pos="1148" class="atn"> singleatt </span><span name="x-equals" pos="1159" class="atneq">= </span><span name="xml-att-quote" pos="1161" class="z">"</span><span name="xml-literal-start" pos="1162" class="av">one</span><span name="xml-att-quote" pos="1165" class="z">"</span><span name="x-tag-end" pos="1166" class="z">&gt;</span><span pos="1167" class="txt">&#xD;
  </span><span name="xml-tag" pos="1171" class="z">&lt;!--</span><span pos="1175" class="cm"> this is ok </span><span name="x-tag-end" pos="1187" class="z">--&gt;</span><span pos="1190" class="txt">&#xD;
  </span><span pos="1194" class="es">&lt;</span><span name="xml-open-tag" pos="1195" class="en">title</span><span name="x-tag-end" pos="1200" class="z">&gt;</span><span name="nested-query" pos="1201" class="op">{</span><span xq="yes" start="1" prev-is-closed="true" class="function">local:title</span><span class="parenthesis">(</span><span xq="yes" start="13" prev-is-closed="false" class="parenthesis">)</span><span xq="yes" start="14" prev-is-closed="true" class="whitespace"> </span><span class="comment" pos="1216" xq="yes">(:my title:)</span><span name="unnested-xquery" pos="1228" class="op">}</span><span pos="1229" class="es">&lt;</span><span name="xml-open-tag" pos="1230" class="en">bold</span><span name="x-tag-end" pos="1234" class="z">&gt;</span><span name="nested-query" pos="1235" class="op">{</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="function">local:mytest</span><span class="parenthesis">(</span><span xq="yes" start="14" prev-is-closed="false" class="parenthesis">)</span><span xq="yes" start="15" prev-is-closed="true" class="op">,</span><span xq="yes" start="16" prev-is-closed="false" class="whitespace"> </span><span pos="1252" class="es">&lt;</span><span name="xml-open-tag" pos="1253" class="en">nested</span><span name="x-tag-end" pos="1259" class="z">&gt;</span><span pos="1260" class="txt">what </span><span name="nested-query" pos="1265" class="op">{</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="variable">$operand-two</span><span xq="yes" start="13" prev-is-closed="true" class="op">,</span><span xq="yes" start="14" prev-is-closed="false" class="whitespace"> </span><span pos="1280" class="es">&lt;</span><span name="xml-open-tag" pos="1281" class="en">full</span><span name="x-tag-end" pos="1285" class="z">&gt;</span><span pos="1286" class="txt">@fulltest</span><span pos="1295" class="es">&lt;</span><span name="xml-open-tag" pos="1296" class="en">fuller</span><span name="x-tag-end" pos="1302" class="z">&gt;</span><span pos="1303" class="txt">@fullertest</span><span pos="1314" class="sc">&lt;/</span><span name="xml-close-tag" pos="1316" class="cl">fuller</span><span name="x-tag-end" pos="1322" class="z">&gt;</span><span pos="1323" class="sc">&lt;/</span><span name="xml-close-tag" pos="1325" class="cl">full</span><span name="x-tag-end" pos="1329" class="z">&gt;</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="op">,</span><span xq="yes" start="2" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="3" prev-is-closed="false" class="function">string</span><span class="parenthesis">(</span><span xq="yes" start="10" prev-is-closed="false" class="axis">@</span><span xq="yes" start="11" prev-is-closed="false" class="qname">new</span><span xq="yes" start="14" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="15" prev-is-closed="true" class="op">,</span><span xq="yes" start="16" prev-is-closed="false" class="whitespace"> </span><span pos="1346" class="es">&lt;</span><span name="xml-open-tag" pos="1347" class="en">empty</span><span name="x-tag-end" pos="1352" class="z">/&gt;</span><span xq="yes" start="1" prev-is-closed="true" class="op">,</span><span xq="yes" start="2" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="3" prev-is-closed="false" class="function">string</span><span class="parenthesis">(</span><span xq="yes" start="10" prev-is-closed="false" class="axis">@</span><span xq="yes" start="11" prev-is-closed="false" class="qname">dev</span><span xq="yes" start="14" prev-is-closed="true" class="parenthesis">)</span><span name="unnested-xquery" pos="1368" class="op">}</span><span name="resume-x-literal-txt" pos="1369" class="txt"> @difficulty </span><span pos="1382" class="sc">&lt;/</span><span name="xml-close-tag" pos="1384" class="cl">nested</span><span name="x-tag-end" pos="1390" class="z">&gt;</span><span name="unnested-xquery" pos="1391" class="op">}</span><span pos="1392" class="sc">&lt;/</span><span name="xml-close-tag" pos="1394" class="cl">bold</span><span name="x-tag-end" pos="1398" class="z">&gt;</span><span pos="1399" class="txt"> mixed text</span><span pos="1410" class="sc">&lt;/</span><span name="xml-close-tag" pos="1412" class="cl">title</span><span name="x-tag-end" pos="1417" class="z">&gt;</span><span pos="1418" class="txt">&#xD;
  </span><span name="xml-tag" pos="1422" class="z">&lt;?</span><span pos="1424" class="pi">abc processing&gt; instruction</span><span name="x-tag-end" pos="1451" class="z">?&gt;</span><span pos="1453" class="txt">&#xD;
</span><span pos="1455" class="sc">&lt;/</span><span name="xml-close-tag" pos="1457" class="cl">head</span><span name="x-tag-end" pos="1461" class="z">&gt;</span><span pos="1462" class="txt">&#xD;
</span><span pos="1464" class="es">&lt;</span><span name="xml-open-tag" pos="1465" class="en">body</span><span name="x-tag-end" pos="1469" class="z">&gt;</span><span pos="1470" class="txt"> &#xD;
  </span><span pos="1475" class="es">&lt;</span><span name="xml-open-tag" pos="1476" class="en">p</span><span name="x-tag-end" pos="1477" class="z">&gt;</span><span name="nested-query" pos="1478" class="op">{</span><span xq="yes" start="1" prev-is-closed="true" class="variable">$operand-one</span><span xq="yes" start="13" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="14" prev-is-closed="true" class="op">+</span><span xq="yes" start="15" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="16" prev-is-closed="false" class="variable">$operand-two</span><span name="unnested-xquery" pos="1506" class="op">}</span><span pos="1507" class="sc">&lt;/</span><span name="xml-close-tag" pos="1509" class="cl">p</span><span name="x-tag-end" pos="1510" class="z">&gt;</span><span pos="1511" class="txt">&#xD;
  </span><span pos="1515" class="es">&lt;</span><span name="xml-open-tag" pos="1516" class="en">p</span><span name="x-tag-end" pos="1517" class="z">&gt;</span><span name="xml-tag" pos="1518" class="z">&lt;![CDATA[</span><span pos="1527" class="cd">this is &lt;testing things&gt; somewhat {testing}and div mod could be tricky/awkward</span><span name="x-tag-end" pos="1605" class="z">]]&gt;</span><span pos="1608" class="sc">&lt;/</span><span name="xml-close-tag" pos="1610" class="cl">p</span><span name="x-tag-end" pos="1611" class="z">&gt;</span><span pos="1612" class="txt">&#xD;
</span><span pos="1614" class="sc">&lt;/</span><span name="xml-close-tag" pos="1616" class="cl">body</span><span name="x-tag-end" pos="1620" class="z">&gt;</span><span pos="1621" class="txt">&#xD;
</span><span pos="1623" class="sc">&lt;/</span><span name="xml-close-tag" pos="1625" class="cl">html</span><span name="x-tag-end" pos="1629" class="z">&gt;</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="whitespace">&#xD;
</span><span xq="yes" start="3" prev-is-closed="true" class="op">else</span><span xq="yes" start="7" prev-is-closed="false" class="whitespace">&#xD;
</span><span pos="1638" class="es">&lt;</span><span name="xml-open-tag" pos="1639" class="en">notTrue</span><span name="x-tag-end" pos="1646" class="z">/&gt;</span></pre></div></body></html>