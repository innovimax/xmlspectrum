<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>nesting-prob.xq</title><link rel="stylesheet" type="text/css" href="theme.css"></head><body><div><pre class="spectrum"><span class="open"></span><span class="qname">declare</span><span class="whitespace"> </span><span class="qname">function</span><span class="whitespace"> </span><span class="function">display:print-modules</span><span class="parenthesis">(</span><span class="variable">$local</span><span class="whitespace"> </span><span class="op">as</span><span class="whitespace"> </span><span class="type-name">xs:boolean</span><span class="parenthesis">)</span><span class="whitespace"> </span><span class="op">as</span><span class="whitespace"> </span><span class="node-type">element</span><span class="parenthesis">(</span><span class="parenthesis">)</span><span class="quantifier">+</span><span class="whitespace">&#xD;
</span><span class="op">{</span><span class="whitespace">&#xD;
  </span><span class="parenthesis">(</span><span class="es">&lt;</span><span class="en">div</span><span class="atn"> class</span><span class="atneq">=</span><span class="z">"</span><span class="av">home</span><span class="z">"</span><span class="z">&gt;</span><span class="txt">&#xD;
    </span><span class="op">{</span><span class="open"></span><span class="whitespace">&#xD;
    </span><span class="if">if</span><span class="whitespace"> </span><span class="parenthesis">(</span><span class="function">fn:exists</span><span class="parenthesis">(</span><span class="function">fn:collection</span><span class="parenthesis">(</span><span class="variable">$display:XQDOC_COLLECTION</span><span class="parenthesis">)</span><span class="step">/</span><span class="qname">xq:xqdoc</span><span class="step">/</span><span class="qname">xq:module</span><span class="filter">[</span><span class="axis">@</span><span class="qname">type</span><span class="op">=</span><span class="op">"</span><span class="literal">library</span><span class="op">"</span><span class="open"></span><span class="filter">]</span><span class="parenthesis">)</span><span class="parenthesis">)</span><span class="whitespace"> </span><span class="op">then</span><span class="whitespace">&#xD;
      </span><span class="parenthesis">(</span><span class="es">&lt;</span><span class="en">h4</span><span class="z">&gt;</span><span class="txt">Library Modules</span><span class="sc">&lt;/</span><span class="cl">h4</span><span class="z">&gt;</span><span class="open"></span><span class="op">,</span><span class="whitespace">&#xD;
        </span><span class="es">&lt;</span><span class="en">br</span><span class="z">/&gt;</span><span class="open"></span><span class="op">,</span><span class="es">&lt;</span><span class="en">br</span><span class="z">/&gt;</span><span class="open"></span><span class="op">,</span><span class="whitespace">&#xD;
        </span><span class="higher">for</span><span class="whitespace"> </span><span class="variable">$x</span><span class="whitespace"> </span><span class="op">in</span><span class="whitespace"> </span><span class="function">fn:collection</span><span class="parenthesis">(</span><span class="variable">$display:XQDOC_COLLECTION</span><span class="parenthesis">)</span><span class="step">/</span><span class="qname">xq:xqdoc</span><span class="filter">[</span><span class="qname">xq:module</span><span class="step">/</span><span class="axis">@</span><span class="qname">type</span><span class="op">=</span><span class="op">"</span><span class="literal">library</span><span class="op">"</span><span class="open"></span><span class="filter">]</span><span class="whitespace">&#xD;
        </span><span class="type-op">order by</span><span class="whitespace"> </span><span class="variable">$x</span><span class="step">/</span><span class="qname">xq:module</span><span class="step">/</span><span class="qname">xq:uri</span><span class="whitespace">&#xD;
        </span><span class="op">return</span><span class="whitespace">&#xD;
         </span><span class="parenthesis">(</span><span class="whitespace"> </span><span class="function">display:build-link</span><span class="parenthesis">(</span><span class="op">"</span><span class="literal">get-module</span><span class="op">"</span><span class="open"></span><span class="op">,</span><span class="whitespace">&#xD;
                              </span><span class="variable">$local</span><span class="op">,</span><span class="whitespace"> &#xD;
                              </span><span class="parenthesis">(</span><span class="function">fn:string</span><span class="parenthesis">(</span><span class="variable">$x</span><span class="step">/</span><span class="qname">xq:module</span><span class="step">/</span><span class="qname">xq:uri</span><span class="parenthesis">)</span><span class="parenthesis">)</span><span class="op">,</span><span class="whitespace">&#xD;
                               </span><span class="function">display:decode-uri</span><span class="parenthesis">(</span><span class="function">fn:string</span><span class="parenthesis">(</span><span class="variable">$x</span><span class="step">/</span><span class="qname">xq:module</span><span class="step">/</span><span class="qname">xq:uri</span><span class="parenthesis">)</span><span class="parenthesis">)</span><span class="parenthesis">)</span><span class="op">,</span><span class="whitespace">&#xD;
           </span><span class="es">&lt;</span><span class="en">br</span><span class="z">/&gt;</span><span class="whitespace"> </span><span class="parenthesis">)</span><span class="whitespace">&#xD;
        </span><span class="parenthesis">)</span><span class="whitespace">           &#xD;
    </span><span class="op">else</span><span class="whitespace">&#xD;
      </span><span class="parenthesis">(</span><span class="parenthesis">)</span><span class="whitespace">&#xD;
    </span><span class="op">}</span><span class="txt">&#xD;
    </span><span class="op">{</span><span class="open"></span><span class="whitespace">&#xD;
    </span><span class="if">if</span><span class="whitespace"> </span><span class="parenthesis">(</span><span class="function">fn:exists</span><span class="parenthesis">(</span><span class="function">fn:collection</span><span class="parenthesis">(</span><span class="variable">$display:XQDOC_COLLECTION</span><span class="parenthesis">)</span><span class="step">/</span><span class="qname">xq:xqdoc</span><span class="step">/</span><span class="qname">xq:module</span><span class="filter">[</span><span class="axis">@</span><span class="qname">type</span><span class="op">=</span><span class="op">"</span><span class="literal">main</span><span class="op">"</span><span class="open"></span><span class="filter">]</span><span class="parenthesis">)</span><span class="parenthesis">)</span><span class="whitespace"> </span><span class="op">then</span><span class="whitespace">&#xD;
      </span><span class="parenthesis">(</span><span class="es">&lt;</span><span class="en">h4</span><span class="z">&gt;</span><span class="txt">Main Modules</span><span class="sc">&lt;/</span><span class="cl">h4</span><span class="z">&gt;</span><span class="open"></span><span class="op">,</span><span class="whitespace">&#xD;
        </span><span class="es">&lt;</span><span class="en">br</span><span class="z">/&gt;</span><span class="open"></span><span class="op">,</span><span class="es">&lt;</span><span class="en">br</span><span class="z">/&gt;</span><span class="open"></span><span class="op">,</span><span class="whitespace">&#xD;
        </span><span class="higher">for</span><span class="whitespace"> </span><span class="variable">$x</span><span class="whitespace"> </span><span class="op">in</span><span class="whitespace"> </span><span class="function">fn:collection</span><span class="parenthesis">(</span><span class="variable">$display:XQDOC_COLLECTION</span><span class="parenthesis">)</span><span class="step">/</span><span class="qname">xq:xqdoc</span><span class="filter">[</span><span class="qname">xq:module</span><span class="step">/</span><span class="axis">@</span><span class="qname">type</span><span class="op">=</span><span class="op">"</span><span class="literal">main</span><span class="op">"</span><span class="open"></span><span class="filter">]</span><span class="whitespace">&#xD;
        </span><span class="type-op">order by</span><span class="whitespace"> </span><span class="variable">$x</span><span class="step">/</span><span class="qname">xq:module</span><span class="step">/</span><span class="qname">xq:uri</span><span class="whitespace">&#xD;
        </span><span class="op">return</span><span class="whitespace">&#xD;
         </span><span class="parenthesis">(</span><span class="whitespace"> </span><span class="function">display:build-link</span><span class="parenthesis">(</span><span class="op">"</span><span class="literal">get-module</span><span class="op">"</span><span class="open"></span><span class="op">,</span><span class="whitespace">&#xD;
                               </span><span class="variable">$local</span><span class="op">,</span><span class="whitespace"> &#xD;
                               </span><span class="parenthesis">(</span><span class="function">fn:string</span><span class="parenthesis">(</span><span class="variable">$x</span><span class="step">/</span><span class="qname">xq:module</span><span class="step">/</span><span class="qname">xq:uri</span><span class="parenthesis">)</span><span class="parenthesis">)</span><span class="op">,</span><span class="whitespace">&#xD;
                                </span><span class="function">display:decode-uri</span><span class="parenthesis">(</span><span class="function">xs:string</span><span class="parenthesis">(</span><span class="variable">$x</span><span class="step">/</span><span class="qname">xq:module</span><span class="step">/</span><span class="qname">xq:uri</span><span class="parenthesis">)</span><span class="parenthesis">)</span><span class="parenthesis">)</span><span class="op">,</span><span class="whitespace">&#xD;
           </span><span class="es">&lt;</span><span class="en">br</span><span class="z">/&gt;</span><span class="whitespace"> </span><span class="parenthesis">)</span><span class="whitespace">&#xD;
      </span><span class="parenthesis">)</span><span class="whitespace">&#xD;
    </span><span class="op">else</span><span class="whitespace">&#xD;
      </span><span class="parenthesis">(</span><span class="parenthesis">)</span><span class="whitespace">&#xD;
    </span><span class="op">}</span><span class="txt">&#xD;
    </span><span class="sc">&lt;/</span><span class="cl">div</span><span class="z">&gt;</span><span class="open"></span><span class="parenthesis">)</span><span class="whitespace">&#xD;
</span><span class="op">}</span><span class="op">;</span></pre></div></body></html>