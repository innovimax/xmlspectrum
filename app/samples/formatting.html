<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>XMLSpectrum output</title><style>
@import url(http://fonts.googleapis.com/css?family=Source+Code+Pro);</style></head><body><div><pre class="spectrum" style="&#xA;    margin:0px;&#xA;    font-family:'Source Code Pro', monospace;&#xA;    font-size: 0.8em;&#xA;    white-space: pre-wrap;&#xA;    display: block;&#xA;    border: none thin;&#xA;    border-color: #405075;&#xA;    background-color:#002b36;&#xA;    padding: 2px;&#xA;    margin-bottom:5px;&#xA;"><span class="es" style="color: #586e75">&lt;</span><span class="enxsl" style="color: #268bd2">xsl:otherwise</span><span class="z" style="color: #586e75"> </span><span class="atn" style="color: #2aa198">xmlns:xsl</span><span class="atneq" style="color: #586e75">=</span><span class="z" style="color: #586e75">"</span><span class="av" style="color: #859900">http://www.w3.org/1999/XSL/Transform</span><span class="z" style="color: #586e75">"</span><span class="scx" style="color: #586e75">&gt;</span><span class="txt" style="color: #839496">
  </span><span class="es" style="color: #586e75">&lt;</span><span class="enxsl" style="color: #268bd2">xsl:analyze-string</span><span class="z" style="color: #586e75"> </span><span class="atn" style="color: #2aa198">select</span><span class="atneq" style="color: #586e75">=</span><span class="z" style="color: #586e75">"</span><span class="variable" start="1" select="quick" style="color: #d33682">$span</span><span class="z" style="color: #586e75">"</span><span class="z" style="color: #586e75"> </span><span class="atn" style="color: #2aa198">regex</span><span class="atneq" style="color: #586e75">=</span><span class="z" style="color: #586e75">"</span><span class="av" style="color: #859900">(\r?)\n.*</span><span class="z" style="color: #586e75">"</span><span class="scx" style="color: #586e75">&gt;</span><span class="txt" style="color: #839496">
    </span><span class="es" style="color: #586e75">&lt;</span><span class="enxsl" style="color: #268bd2">xsl:matching-substring</span><span class="scx" style="color: #586e75">&gt;</span><span class="txt" style="color: #839496">
      </span><span class="es" style="color: #586e75">&lt;</span><span class="enxsl" style="color: #268bd2">xsl:variable</span><span class="z" style="color: #586e75"> </span><span class="atn" style="color: #2aa198">name</span><span class="atneq" style="color: #586e75">=</span><span class="z" style="color: #586e75">"</span><span class="vname" style="color: #d33682">r-length</span><span class="z" style="color: #586e75">"</span><span class="z" style="color: #586e75"> </span><span class="atn" style="color: #2aa198">as</span><span class="atneq" style="color: #586e75">=</span><span class="z" style="color: #586e75">"</span><span class="av" style="color: #859900">xs:integer</span><span class="z" style="color: #586e75">"</span><span class="z" style="color: #586e75"> </span><span class="atn" style="color: #2aa198">select</span><span class="atneq" style="color: #586e75">=</span><span class="z" style="color: #586e75">"</span><span class="function" start="1" pair-end="29" select="quick" style="color: #cb4b16">string-length</span><span class="parenthesis" style="color: #268bd2">(</span><span class="function" start="15" pair-end="28" select="quick" style="color: #cb4b16">regex-group</span><span class="parenthesis" style="color: #268bd2">(</span><span class="numeric" start="27" style="color: #2aa198">1</span><span class="parenthesis" start="28" style="color: #268bd2">)</span><span class="parenthesis" start="29" style="color: #268bd2">)</span><span class="z" style="color: #586e75">"</span><span class="sc" style="color: #586e75">/&gt;</span><span class="txt" style="color: #839496">
      </span><span class="es" style="color: #586e75">&lt;</span><span class="enxsl" style="color: #268bd2">xsl:variable</span><span class="z" style="color: #586e75"> </span><span class="atn" style="color: #2aa198">name</span><span class="atneq" style="color: #586e75">=</span><span class="z" style="color: #586e75">"</span><span class="vname" style="color: #d33682">text</span><span class="z" style="color: #586e75">"</span><span class="z" style="color: #586e75"> </span><span class="atn" style="color: #2aa198">select</span><span class="atneq" style="color: #586e75">=</span><span class="z" style="color: #586e75">"</span><span class="function" start="1" pair-end="27" select="quick" style="color: #cb4b16">substring</span><span class="parenthesis" style="color: #268bd2">(</span><span class="context" start="11" style="color: #2aa198">.</span><span class="op" start="12" style="color: #b58900">,</span><span class="whitespace" start="13" style="color: #b58900"> </span><span class="numeric" start="14" style="color: #2aa198">2</span><span class="whitespace" start="15" style="color: #b58900"> </span><span class="op" start="16" style="color: #b58900">+</span><span class="whitespace" start="17" style="color: #b58900"> </span><span class="variable" start="18" select="quick" style="color: #d33682">$r-length</span><span class="parenthesis" start="27" style="color: #268bd2">)</span><span class="z" style="color: #586e75">"</span><span class="z" style="color: #586e75"> </span><span class="atn" style="color: #2aa198">as</span><span class="atneq" style="color: #586e75">=</span><span class="z" style="color: #586e75">"</span><span class="av" style="color: #859900">xs:string</span><span class="z" style="color: #586e75">"</span><span class="sc" style="color: #586e75">/&gt;</span><span class="txt" style="color: #839496">
      </span><span class="es" style="color: #586e75">&lt;</span><span class="enxsl" style="color: #268bd2">xsl:variable</span><span class="z" style="color: #586e75"> </span><span class="atn" style="color: #2aa198">name</span><span class="atneq" style="color: #586e75">=</span><span class="z" style="color: #586e75">"</span><span class="vname" style="color: #d33682">trimmed-text</span><span class="z" style="color: #586e75">"</span><span class="z" style="color: #586e75"> </span><span class="atn" style="color: #2aa198">select</span><span class="atneq" style="color: #586e75">=</span><span class="z" style="color: #586e75">"</span><span class="function" start="1" pair-end="18" select="quick" style="color: #cb4b16">f:left-trim</span><span class="parenthesis" style="color: #268bd2">(</span><span class="variable" start="13" select="quick" style="color: #d33682">$text</span><span class="parenthesis" start="18" style="color: #268bd2">)</span><span class="z" style="color: #586e75">"</span><span class="z" style="color: #586e75"> </span><span class="atn" style="color: #2aa198">as</span><span class="atneq" style="color: #586e75">=</span><span class="z" style="color: #586e75">"</span><span class="av" style="color: #859900">xs:string</span><span class="z" style="color: #586e75">"</span><span class="sc" style="color: #586e75">/&gt;</span><span class="txt" style="color: #839496">
      
      </span><span class="es" style="color: #586e75">&lt;</span><span class="enxsl" style="color: #268bd2">xsl:variable</span><span class="z" style="color: #586e75"> </span><span class="atn" style="color: #2aa198">name</span><span class="atneq" style="color: #586e75">=</span><span class="z" style="color: #586e75">"</span><span class="vname" style="color: #d33682">trim-size</span><span class="z" style="color: #586e75">"</span><span class="z" style="color: #586e75"> </span><span class="atn" style="color: #2aa198">as</span><span class="atneq" style="color: #586e75">=</span><span class="z" style="color: #586e75">"</span><span class="av" style="color: #859900">xs:integer</span><span class="z" style="color: #586e75">"</span><span class="z" style="color: #586e75">
                    </span><span class="atn" style="color: #2aa198">select</span><span class="atneq" style="color: #586e75">=</span><span class="z" style="color: #586e75">"</span><span class="parenthesis" start="1" pair-end="56" select="quick" style="color: #268bd2">(</span><span class="function" start="2" pair-end="21" select="quick" style="color: #cb4b16">string-length</span><span class="parenthesis" style="color: #268bd2">(</span><span class="variable" start="16" select="quick" style="color: #d33682">$text</span><span class="parenthesis" start="21" style="color: #268bd2">)</span><span class="whitespace" start="22" style="color: #b58900"> </span><span class="op" start="23" style="color: #b58900">-</span><span class="whitespace" start="24" style="color: #b58900"> </span><span class="function" start="25" pair-end="52" select="quick" style="color: #cb4b16">string-length</span><span class="parenthesis" style="color: #268bd2">(</span><span class="variable" start="39" select="quick" style="color: #d33682">$trimmed-text</span><span class="parenthesis" start="52" style="color: #268bd2">)</span><span class="op" start="53" style="color: #b58900">,</span><span class="whitespace" start="54" style="color: #b58900"> </span><span class="numeric" start="55" style="color: #2aa198">0</span><span class="parenthesis" start="56" style="color: #268bd2">)</span><span class="filter" start="57" pair-end="59" select="quick" style="color: #268bd2">[</span><span class="numeric" start="58" style="color: #2aa198">1</span><span class="filter" start="59" style="color: #268bd2">]</span><span class="z" style="color: #586e75">"</span><span class="sc" style="color: #586e75">/&gt;</span><span class="txt" style="color: #839496">
      </span><span class="es" style="color: #586e75">&lt;</span><span class="en" style="color: #6c71c4">nl</span><span class="scx" style="color: #586e75">&gt;</span><span class="txt" style="color: #839496">
        
        </span><span class="z" style="color: #586e75">&lt;!--</span><span class="cm" style="color: #859900"> TODO: Only trim minimum 
             necessary 
             from attribute 
                    values
                    also
                    good
        </span><span class="z" style="color: #586e75">--&gt;</span><span class="txt" style="color: #839496">
        </span><span class="z" style="color: #586e75">&lt;?</span><span class="pi" style="color: #2aa198">pre abc def
             def ghi
                 jkl
             
             
        </span><span class="z" style="color: #586e75">?&gt;</span><span class="txt" style="color: #839496">
        </span><span class="es" style="color: #586e75">&lt;</span><span class="enxsl" style="color: #268bd2">xsl:value-of</span><span class="z" style="color: #586e75"> </span><span class="atn" style="color: #2aa198">select</span><span class="atneq" style="color: #586e75">=</span><span class="z" style="color: #586e75">"</span><span class="if" start="1" style="color: #b58900">if</span><span class="whitespace" start="3" style="color: #b58900"> </span><span class="parenthesis" start="4" pair-end="15" select="quick" style="color: #268bd2">(</span><span class="variable" start="5" select="quick" style="color: #d33682">$auto-trim</span><span class="parenthesis" start="15" style="color: #268bd2">)</span><span class="whitespace" start="16" style="color: #b58900"> </span><span class="op" start="17" style="color: #b58900">then</span><span class="whitespace" start="21" style="color: #b58900">
                              </span><span class="comment" start="60" style="color: #859900">(: comments may be nested
                              (: phil's tokenizer must
                              handle quotes also :)
                              like this :)</span><span class="whitespace" start="259" style="color: #b58900">
                              
                              </span><span class="if" start="299" style="color: #b58900">if</span><span class="whitespace" start="301" style="color: #b58900"> </span><span class="parenthesis" start="302" pair-end="354" select="quick" style="color: #268bd2">(</span><span class="variable" start="303" select="quick" style="color: #d33682">$class</span><span class="whitespace" start="309" style="color: #b58900"> </span><span class="op" start="310" style="color: #b58900">eq</span><span class="whitespace" start="312" style="color: #b58900"> </span><span class="op" style="color: #b58900">'</span><span class="literal" start="313" style="color: #93a1a1">whitespace</span><span class="op" style="color: #b58900">'</span><span class="whitespace" start="325" style="color: #b58900"> </span><span class="op" start="326" style="color: #b58900">and</span><span class="whitespace" start="329" style="color: #b58900"> </span><span class="variable" start="330" select="quick" style="color: #d33682">$trim-size</span><span class="whitespace" start="340" style="color: #b58900"> </span><span class="op" start="341" style="color: #b58900">gt</span><span class="whitespace" start="343" style="color: #b58900"> </span><span class="variable" start="344" select="quick" style="color: #d33682">$preserved</span><span class="parenthesis" start="354" style="color: #268bd2">)</span><span class="whitespace" start="355" style="color: #b58900"> </span><span class="op" start="356" style="color: #b58900">then</span><span class="whitespace" start="360" style="color: #b58900">
                                    </span><span class="function" start="405" pair-end="448" select="quick" style="color: #cb4b16">concat</span><span class="parenthesis" style="color: #268bd2">(</span><span class="op" style="color: #b58900">'</span><span class="literal" start="412" style="color: #93a1a1"></span><span class="op" style="color: #b58900">'</span><span class="op" start="414" style="color: #b58900">,</span><span class="whitespace" start="415" style="color: #b58900"> </span><span class="function" start="416" pair-end="447" select="quick" style="color: #cb4b16">substring</span><span class="parenthesis" style="color: #268bd2">(</span><span class="variable" start="426" select="quick" style="color: #d33682">$text</span><span class="op" start="431" style="color: #b58900">,</span><span class="whitespace" start="432" style="color: #b58900"> </span><span class="variable" start="433" select="quick" style="color: #d33682">$preserved</span><span class="whitespace" start="443" style="color: #b58900"> </span><span class="op" start="444" style="color: #b58900">+</span><span class="whitespace" start="445" style="color: #b58900"> </span><span class="numeric" start="446" style="color: #2aa198">1</span><span class="parenthesis" start="447" style="color: #268bd2">)</span><span class="parenthesis" start="448" style="color: #268bd2">)</span><span class="whitespace" start="449" style="color: #b58900">
                                 </span><span class="op" start="491" style="color: #b58900">else</span><span class="whitespace" start="495" style="color: #b58900">
                                    </span><span class="function" start="540" pair-end="564" select="quick" style="color: #cb4b16">concat</span><span class="parenthesis" style="color: #268bd2">(</span><span class="op" style="color: #b58900">'</span><span class="literal" start="547" style="color: #93a1a1"></span><span class="op" style="color: #b58900">'</span><span class="op" start="549" style="color: #b58900">,</span><span class="whitespace" start="550" style="color: #b58900"> </span><span class="variable" start="551" select="quick" style="color: #d33682">$trimmed-text</span><span class="parenthesis" start="564" style="color: #268bd2">)</span><span class="whitespace" start="565" style="color: #b58900">
                              </span><span class="op" start="604" style="color: #b58900">else</span><span class="whitespace" start="608" style="color: #b58900"> </span><span class="variable" start="609" select="quick" style="color: #d33682">$text</span><span class="z" style="color: #586e75">"</span><span class="sc" style="color: #586e75">/&gt;</span><span class="txt" style="color: #839496">
      </span><span class="ez" style="color: #586e75">&lt;/</span><span class="cl" style="color: #6c71c4">nl</span><span class="ec" style="color: #586e75">&gt;</span><span class="txt" style="color: #839496">
      </span><span class="es" style="color: #586e75">&lt;</span><span class="en" style="color: #6c71c4">pr</span><span class="scx" style="color: #586e75">&gt;</span><span class="txt" style="color: #839496">
        </span><span class="es" style="color: #586e75">&lt;</span><span class="enxsl" style="color: #268bd2">xsl:variable</span><span class="z" style="color: #586e75"> </span><span class="atn" style="color: #2aa198">name</span><span class="atneq" style="color: #586e75">=</span><span class="z" style="color: #586e75">"</span><span class="vname" style="color: #d33682">tgesting</span><span class="z" style="color: #586e75">"</span><span class="z" style="color: #586e75"> </span><span class="atn" style="color: #2aa198">as</span><span class="atneq" style="color: #586e75">=</span><span class="z" style="color: #586e75">"</span><span class="av" style="color: #859900">xs:boolean</span><span class="z" style="color: #586e75">"</span><span class="z" style="color: #586e75"> 
                      </span><span class="atn" style="color: #2aa198">select</span><span class="atneq" style="color: #586e75">=</span><span class="z" style="color: #586e75">"</span><span class="function" start="1" pair-end="204" select="quick" style="color: #cb4b16">function1</span><span class="parenthesis" style="color: #268bd2">(</span><span class="whitespace" start="11" style="color: #b58900">
                                 </span><span class="function" start="53" pair-end="164" select="quick" style="color: #cb4b16">function2</span><span class="parenthesis" style="color: #268bd2">(</span><span class="whitespace" start="63" style="color: #b58900">
                                    </span><span class="function" start="108" pair-end="121" select="quick" style="color: #cb4b16">function3</span><span class="parenthesis" style="color: #268bd2">(</span><span class="qname" start="118" select="quick" style="color: #6c71c4">new</span><span class="parenthesis" start="121" style="color: #268bd2">)</span><span class="whitespace" start="122" style="color: #b58900">
                                 </span><span class="parenthesis" start="164" style="color: #268bd2">)</span><span class="whitespace" start="165" style="color: #b58900">
                              </span><span class="parenthesis" start="204" style="color: #268bd2">)</span><span class="z" style="color: #586e75">"</span><span class="sc" style="color: #586e75">/&gt;</span><span class="txt" style="color: #839496">
        
        </span><span class="es" style="color: #586e75">&lt;</span><span class="enxsl" style="color: #268bd2">xsl:variable</span><span class="z" style="color: #586e75">
            </span><span class="atn" style="color: #2aa198">select</span><span class="atneq" style="color: #586e75">=</span><span class="z" style="color: #586e75">"</span><span class="function" start="1" pair-end="172" select="quick" style="color: #cb4b16">function1</span><span class="parenthesis" style="color: #268bd2">(</span><span class="whitespace" start="11" style="color: #b58900">
                       </span><span class="function" start="45" pair-end="140" select="quick" style="color: #cb4b16">function2</span><span class="parenthesis" style="color: #268bd2">(</span><span class="whitespace" start="55" style="color: #b58900">
                          </span><span class="function" start="92" pair-end="105" select="quick" style="color: #cb4b16">function3</span><span class="parenthesis" style="color: #268bd2">(</span><span class="qname" start="102" select="quick" style="color: #6c71c4">new</span><span class="parenthesis" start="105" style="color: #268bd2">)</span><span class="whitespace" start="106" style="color: #b58900">
                       </span><span class="parenthesis" start="140" style="color: #268bd2">)</span><span class="whitespace" start="141" style="color: #b58900">
                    </span><span class="parenthesis" start="172" style="color: #268bd2">)</span><span class="z" style="color: #586e75">"</span><span class="sc" style="color: #586e75">/&gt;</span><span class="txt" style="color: #839496">
      </span><span class="ez" style="color: #586e75">&lt;/</span><span class="cl" style="color: #6c71c4">pr</span><span class="ec" style="color: #586e75">&gt;</span><span class="txt" style="color: #839496">
    </span><span class="ez" style="color: #586e75">&lt;/</span><span class="clxsl" style="color: #268bd2">xsl:matching-substring</span><span class="ec" style="color: #586e75">&gt;</span><span class="txt" style="color: #839496">
    </span><span class="es" style="color: #586e75">&lt;</span><span class="enxsl" style="color: #268bd2">xsl:non-matching-substring</span><span class="scx" style="color: #586e75">&gt;</span><span class="txt" style="color: #839496">
      </span><span class="es" style="color: #586e75">&lt;</span><span class="en" style="color: #6c71c4">tt</span><span class="scx" style="color: #586e75">&gt;</span><span class="txt" style="color: #839496">
        </span><span class="es" style="color: #586e75">&lt;</span><span class="enxsl" style="color: #268bd2">xsl:value-of</span><span class="z" style="color: #586e75"> </span><span class="atn" style="color: #2aa198">select</span><span class="atneq" style="color: #586e75">=</span><span class="z" style="color: #586e75">"</span><span class="context" start="1" style="color: #2aa198">.</span><span class="z" style="color: #586e75">"</span><span class="sc" style="color: #586e75">/&gt;</span><span class="txt" style="color: #839496">
      </span><span class="ez" style="color: #586e75">&lt;/</span><span class="cl" style="color: #6c71c4">tt</span><span class="ec" style="color: #586e75">&gt;</span><span class="txt" style="color: #839496">
      </span><span class="es" style="color: #586e75">&lt;</span><span class="en" style="color: #6c71c4">para</span><span class="scx" style="color: #586e75">&gt;</span><span class="txt" style="color: #839496">the quic kbrown fox juod umpe ocver the lazy dog
        </span><span class="es" style="color: #586e75">&lt;</span><span class="en" style="color: #6c71c4">bold</span><span class="scx" style="color: #586e75">&gt;</span><span class="txt" style="color: #839496">newer text </span><span class="ez" style="color: #586e75">&lt;/</span><span class="cl" style="color: #6c71c4">bold</span><span class="ec" style="color: #586e75">&gt;</span><span class="txt" style="color: #839496">now is the time for all good people to 
        come to the aid
      </span><span class="ez" style="color: #586e75">&lt;/</span><span class="cl" style="color: #6c71c4">para</span><span class="ec" style="color: #586e75">&gt;</span><span class="txt" style="color: #839496">
      </span><span class="es" style="color: #586e75">&lt;</span><span class="en" style="color: #6c71c4">new-text</span><span class="scx" style="color: #586e75">&gt;</span><span class="txt" style="color: #839496">
        one    two     three
               alpha   bravo
               charlie delta
        echo
      </span><span class="ez" style="color: #586e75">&lt;/</span><span class="cl" style="color: #6c71c4">new-text</span><span class="ec" style="color: #586e75">&gt;</span><span class="txt" style="color: #839496">
      </span><span class="es" style="color: #586e75">&lt;</span><span class="en" style="color: #6c71c4">cdata</span><span class="scx" style="color: #586e75">&gt;</span><span class="txt" style="color: #839496">
        </span><span class="z" style="color: #586e75">&lt;![CDATA[
        </span><span class="cd" style="color: #839496">&lt;this&gt;
        &lt;could&gt;
            &lt;p name="phil"&gt;
                This is a test
                        of formatting
                        in cdata&lt;/p&gt;
        &lt;/could&gt;
        &lt;/this&gt;</span><span class="z" style="color: #586e75">]]&gt;</span><span class="txt" style="color: #839496">
      </span><span class="ez" style="color: #586e75">&lt;/</span><span class="cl" style="color: #6c71c4">cdata</span><span class="ec" style="color: #586e75">&gt;</span><span class="txt" style="color: #839496">
      </span><span class="es" style="color: #586e75">&lt;</span><span class="en" style="color: #6c71c4">new-attribute</span><span class="z" style="color: #586e75"> 
          </span><span class="atn" style="color: #2aa198">myatt</span><span class="atneq" style="color: #586e75">=</span><span class="z" style="color: #586e75">"</span><span class="av" style="color: #859900">  four   five    six
                   one    two     three
                          alpha   bravo
                          charlie delta
                   echo</span><span class="z" style="color: #586e75">"</span><span class="sc" style="color: #586e75">/&gt;</span><span class="txt" style="color: #839496">
    </span><span class="ez" style="color: #586e75">&lt;/</span><span class="clxsl" style="color: #268bd2">xsl:non-matching-substring</span><span class="ec" style="color: #586e75">&gt;</span><span class="txt" style="color: #839496">
  </span><span class="ez" style="color: #586e75">&lt;/</span><span class="clxsl" style="color: #268bd2">xsl:analyze-string</span><span class="ec" style="color: #586e75">&gt;</span><span class="txt" style="color: #839496">
</span><span class="ez" style="color: #586e75">&lt;/</span><span class="clxsl" style="color: #268bd2">xsl:otherwise</span><span class="ec" style="color: #586e75">&gt;</span><span class="txt" style="color: #839496">
</span></pre></div></body></html>